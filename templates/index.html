<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ ACE-Step 1.5 Music Generator</h1>
            <p>AI„ÅßÈü≥Ê•Ω„ÇíÁîüÊàê - „ÉÜ„Éº„Éû„ÇíÂÖ•Âäõ„Åô„Çã„Å†„Åë„Åß„ÄÅÊ≠åË©û„Éª„Çø„Ç∞„ÉªÈü≥Ê•Ω„ÇíËá™ÂãïÁîüÊàê</p>
        </header>

        <!-- ÂÜçÁîü„Ç®„É™„Ç¢Ôºà„Éò„ÉÉ„ÉÄ„ÉºÁõ¥‰∏ã„ÉªÊ®™ÂπÖ‰∏ÄÊùØÔºâ -->
        <div class="player-section" id="player-section">
            <div class="card player-card">
                <div class="card-header">
                    <span class="icon">üéß</span>
                    <h2>ÂÜçÁîü</h2>
                </div>

                <!-- „Ç™„Éº„Éá„Ç£„Ç™„Éó„É¨„Ç§„É§„Éº -->
                <div class="audio-player-content" id="audio-player">
                    <!-- „Éì„Ç∏„É•„Ç¢„É©„Ç§„Ç∂„Éº -->
                    <div class="visualizer-container" id="visualizer-container">
                        <canvas id="visualizer" width="600" height="150"></canvas>
                    </div>
                    <audio id="audio" controls crossorigin="anonymous"></audio>
                    <div class="action-buttons" style="margin-top: 15px;">
                        <a class="btn btn-secondary" id="download-btn" href="#" download>
                            ‚¨áÔ∏è „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-grid">
            <!-- Â∑¶ÂÅ¥: ÂÖ•Âäõ„Éë„Éç„É´ -->
            <div class="input-panel">
                <!-- „ÉÜ„Éº„ÉûÂÖ•Âäõ -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üí°</span>
                        <h2>„ÉÜ„Éº„Éû / „Ç∑„Éä„É™„Ç™</h2>
                    </div>
                    <div class="form-group">
                        <textarea id="theme" placeholder="‰æã: Â§úÁ©∫„ÇíË¶ã‰∏ä„Åí„Å¶È°ò„ÅÑ„ÇíËæº„ÇÅ„ÇãÈ≠îÊ≥ïÂ∞ëÂ•≥„ÅÆÁâ©Ë™û&#10;&#10;„Åæ„Åü„ÅØ: Êòé„Çã„ÅÑ„Éù„ÉÉ„Éó„Å™Â§è„ÅÆÊÅãÊÑõ„ÇΩ„É≥„Ç∞"></textarea>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-secondary" id="lyrics-btn" onclick="generateLyrics()">
                            üìù AI‰ΩúË©û
                        </button>
                        <button class="btn btn-secondary" id="tags-btn" onclick="generateTags()">
                            üè∑Ô∏è „Çø„Ç∞ÁîüÊàê
                        </button>
                        <button class="btn btn-primary" id="auto-btn" onclick="autoGenerate()">
                            üöÄ AUTOÔºà‰∏ÄÊã¨ÁîüÊàêÔºâ
                        </button>
                    </div>
                </div>

                <!-- Ê≠åË©û„Ç®„Éá„Ç£„Çø -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üìù</span>
                        <h2>Ê≠åË©û / Lyrics</h2>
                    </div>
                    <div class="lyrics-editor">
                        <div class="structure-tags">
                            <span class="structure-tag" onclick="insertTag('[intro]')">[intro]</span>
                            <span class="structure-tag" onclick="insertTag('[verse]')">[verse]</span>
                            <span class="structure-tag" onclick="insertTag('[chorus]')">[chorus]</span>
                            <span class="structure-tag" onclick="insertTag('[bridge]')">[bridge]</span>
                            <span class="structure-tag" onclick="insertTag('[outro]')">[outro]</span>
                            <span class="structure-tag" onclick="insertTag('[inst]')">[inst]</span>
                        </div>
                        <div class="form-group textarea-container">
                            <textarea id="lyrics" placeholder="[intro]&#10;[inst]&#10;&#10;[verse]&#10;Êòü„ÅÆÊµ∑„Å´ÊµÆ„Åã„Å∂È°ò„ÅÑ„Åå&#10;Â§úÁ©∫„ÇíÈßÜ„ÅëÂ∑°„Çã&#10;&#10;[chorus]&#10;Ëºù„ÅèÊú™Êù•„Å∏..."
                            ></textarea>
                            <div class="resize-handle" title="„Éâ„É©„ÉÉ„Ç∞„Åß„Çµ„Ç§„Ç∫Â§âÊõ¥">‚ñΩ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Âè≥ÂÅ¥: Ë®≠ÂÆö„Å®Âá∫Âäõ -->
            <div class="output-panel">
                <!-- „Çø„Ç∞/„Ç∏„É£„É≥„É´ -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üéµ</span>
                        <h2>„Çø„Ç∞ / „Ç∏„É£„É≥„É´</h2>
                    </div>
                    <div class="form-group">
                        <textarea id="prompt" rows="3" placeholder="‰æã: Neo-Soul, warm, organic, female voice, emotional, piano, strings"></textarea>
                    </div>
                    <div class="genre-suggestions">
                        <span class="genre-suggestion" onclick="addGenre('pop')">Pop</span>
                        <span class="genre-suggestion" onclick="addGenre('rock')">Rock</span>
                        <span class="genre-suggestion" onclick="addGenre('jazz')">Jazz</span>
                        <span class="genre-suggestion" onclick="addGenre('electronic')">Electronic</span>
                        <span class="genre-suggestion" onclick="addGenre('R&B')">R&B</span>
                        <span class="genre-suggestion" onclick="addGenre('hip-hop')">Hip-Hop</span>
                        <span class="genre-suggestion" onclick="addGenre('classical')">Classical</span>
                        <span class="genre-suggestion" onclick="addGenre('folk')">Folk</span>
                    </div>
                </div>

                <!-- Èü≥Ê•Ω„Éë„É©„É°„Éº„Çø -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üéõÔ∏è</span>
                        <h2>Èü≥Ê•Ω„Éë„É©„É°„Éº„Çø</h2>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="language">Ë®ÄË™û</label>
                            <select id="language">
                                <option value="ja" selected>Êó•Êú¨Ë™û</option>
                                <option value="en">English</option>
                                <option value="zh">‰∏≠Êñá</option>
                                <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                                <option value="es">Espa√±ol</option>
                                <option value="fr">Fran√ßais</option>
                                <option value="de">Deutsch</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="key_scale">Ë™ø</label>
                            <select id="key_scale">
                                <option value="">Ëá™Âãï</option>
                                <optgroup label="C">
                                    <option value="C major">C major</option>
                                    <option value="C minor">C minor</option>
                                    <option value="C# major">C# major</option>
                                    <option value="C# minor">C# minor</option>
                                    <option value="Cb major">Cb major</option>
                                    <option value="Cb minor">Cb minor</option>
                                </optgroup>
                                <optgroup label="D">
                                    <option value="D major">D major</option>
                                    <option value="D minor">D minor</option>
                                    <option value="D# major">D# major</option>
                                    <option value="D# minor">D# minor</option>
                                    <option value="Db major">Db major</option>
                                    <option value="Db minor">Db minor</option>
                                </optgroup>
                                <optgroup label="E">
                                    <option value="E major">E major</option>
                                    <option value="E minor">E minor</option>
                                    <option value="Eb major">Eb major</option>
                                    <option value="Eb minor">Eb minor</option>
                                </optgroup>
                                <optgroup label="F">
                                    <option value="F major">F major</option>
                                    <option value="F minor">F minor</option>
                                    <option value="F# major">F# major</option>
                                    <option value="F# minor">F# minor</option>
                                </optgroup>
                                <optgroup label="G">
                                    <option value="G major">G major</option>
                                    <option value="G minor">G minor</option>
                                    <option value="G# major">G# major</option>
                                    <option value="G# minor">G# minor</option>
                                    <option value="Gb major">Gb major</option>
                                    <option value="Gb minor">Gb minor</option>
                                </optgroup>
                                <optgroup label="A">
                                    <option value="A major">A major</option>
                                    <option value="A minor">A minor</option>
                                    <option value="A# major">A# major</option>
                                    <option value="A# minor">A# minor</option>
                                    <option value="Ab major">Ab major</option>
                                    <option value="Ab minor">Ab minor</option>
                                </optgroup>
                                <optgroup label="B">
                                    <option value="B major">B major</option>
                                    <option value="B minor">B minor</option>
                                    <option value="Bb major">Bb major</option>
                                    <option value="Bb minor">Bb minor</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="time_signature">ÊãçÂ≠ê</label>
                            <select id="time_signature">
                                <option value="">Ëá™Âãï</option>
                                <option value="4" selected>4/4Ôºà4„Éì„Éº„ÉàÔºâ</option>
                                <option value="3">3/4Ôºà„ÉØ„É´„ÉÑÔºâ</option>
                                <option value="2">2/4Ôºà„Éû„Éº„ÉÅÔºâ</option>
                                <option value="6">6/8Ôºà6„Éì„Éº„ÉàÔºâ</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="audio_duration">Èï∑„ÅïÔºàÁßíÔºâ</label>
                            <input type="number" id="audio_duration" min="10" max="300" value="150" step="1">
                        </div>
                        <div class="form-group">
                            <label for="bpm">BPM</label>
                            <input type="number" id="bpm" min="30" max="300" value="120" step="1">
                        </div>
                        <div class="form-group">
                            <label for="inference_steps">STEP</label>
                            <input type="number" id="inference_steps" min="1" max="200" value="60" step="1" title="Êé®Ë´ñ„Çπ„ÉÜ„ÉÉ„ÉóÊï∞ÔºàÂ§ö„ÅÑ„Åª„Å©È´òÂìÅË≥™„ÉªÈÅÖ„ÅÑÔºâ">
                        </div>
                    </div>

                    <!-- Ë©≥Á¥∞Ë®≠ÂÆöÔºà„Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥Ôºâ -->
                    <div class="accordion" id="advanced-accordion">
                        <div class="accordion-header" onclick="toggleAccordion('advanced-accordion')">
                            <span>üîß Ë©≥Á¥∞Ë®≠ÂÆö</span>
                            <span class="accordion-icon">‚ñº</span>
                        </div>
                        <div class="accordion-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="guidance_scale">CFG</label>
                                    <input type="number" id="guidance_scale" min="0" max="20" value="3.0" step="0.1" title="Classifier-Free GuidanceÔºàÈ´ò„ÅÑ„Åª„Å©„Éó„É≠„É≥„Éó„Éà„Å´Âø†ÂÆüÔºâ">
                                </div>
                                <div class="form-group">
                                    <label for="seed">SEED</label>
                                    <input type="number" id="seed" placeholder="„É©„É≥„ÉÄ„É†" title="„Ç∑„Éº„ÉâÂÄ§ÔºàÁ©∫=„É©„É≥„ÉÄ„É†Ôºâ">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="batch_size">„Éê„ÉÉ„ÉÅ„Çµ„Ç§„Ç∫</label>
                                    <select id="batch_size">
                                        <option value="1" selected>1</option>
                                        <option value="2">2</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="audio_format">Âá∫ÂäõÂΩ¢Âºè</label>
                                    <select id="audio_format">
                                        <option value="mp3" selected>MP3</option>
                                        <option value="wav">WAV</option>
                                        <option value="flac">FLAC</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="thinking" checked>
                                    Thinking ModeÔºàÈ´òÂìÅË≥™„ÉªÈÅÖ„ÅÑÔºâ
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÁîüÊàê„Éú„Çø„É≥ -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üéµ</span>
                        <h2>„Ç¢„ÇØ„Ç∑„Éß„É≥</h2>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-success" id="generate-btn" onclick="generateMusic()">
                            ‚ú® Èü≥Ê•Ω„ÇíÁîüÊàê
                        </button>
                        <button class="btn btn-secondary" onclick="resetForm()">
                            üîÑ „É™„Çª„ÉÉ„Éà
                        </button>
                    </div>

                    <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„É°„ÉÉ„Çª„Éº„Ç∏ -->
                    <div class="status-message" id="status-message"></div>

                    <!-- ÈÄ≤Êçó„Éê„Éº -->
                    <div class="progress-container" id="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-text" id="progress-text">Âá¶ÁêÜ‰∏≠...</div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="server-info" id="server-info">
                <span class="info-item" id="model-info">ü§ñ „É¢„Éá„É´: Á¢∫Ë™ç‰∏≠...</span>
                <span class="info-item" id="queue-info">üìä „Ç≠„É•„Éº: -</span>
                <span class="info-item" id="avg-time-info">‚è±Ô∏è Âπ≥Âùá: -</span>
            </div>
            <p>ACE-Step 1.5 Standalone Web App</p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
